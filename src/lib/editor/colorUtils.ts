/**
 * 色変換ユーティリティ
 */

/**
 * RGB値をHex文字列に変換
 * @param r - 赤 (0-255)
 * @param g - 緑 (0-255)
 * @param b - 青 (0-255)
 * @returns Hex文字列 (例: "#ff0000")
 */
export function rgbToHex(r: number, g: number, b: number): string {
	return `#${[r, g, b].map((x) => x.toString(16).padStart(2, "0")).join("")}`;
}

/**
 * Hex文字列をRGB値に変換
 * @param hex - Hex文字列 (例: "#ff0000" または "ff0000")
 * @returns RGB値オブジェクト
 */
export function hexToRgb(hex: string): { r: number; g: number; b: number } {
	const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
	return result
		? {
				r: Number.parseInt(result[1], 16),
				g: Number.parseInt(result[2], 16),
				b: Number.parseInt(result[3], 16),
			}
		: { r: 0, g: 0, b: 0 };
}

/**
 * プリセットカラーパレット（56色: 7行 × 8列）
 *
 * 列の色系統:
 * - 列1: グレースケール（白→ダークグレー）
 * - 列2: 赤系（ピンク→モーヴ）
 * - 列3: オレンジ系（ピーチ→ベージュ）
 * - 列4: 黄色系（レモン→カーキ）
 * - 列5: 緑系（ミント→エメラルド）
 * - 列6: シアン系（アクア→ターコイズ）
 * - 列7: 青系（スカイブルー→ラベンダー）
 * - 列8: ピンク/紫系（マゼンタ→オーキッド）
 */
export const COLOR_PALETTE: { r: number; g: number; b: number }[][] = [
	// 行1: パステルカラー
	[
		{ r: 255, g: 255, b: 255 }, // 白
		{ r: 255, g: 189, b: 191 }, // 薄いピンク
		{ r: 255, g: 224, b: 200 }, // 薄いオレンジ
		{ r: 255, g: 248, b: 176 }, // 薄い黄
		{ r: 233, g: 255, b: 226 }, // 薄い緑
		{ r: 232, g: 255, b: 254 }, // 薄いシアン
		{ r: 156, g: 208, b: 244 }, // 薄い青
		{ r: 255, g: 220, b: 255 }, // 薄いマゼンタ
	],
	// 行2: 原色/基本色
	[
		{ r: 248, g: 248, b: 248 }, // 薄いグレー
		{ r: 255, g: 0, b: 0 }, // 赤
		{ r: 255, g: 128, b: 0 }, // オレンジ
		{ r: 255, g: 255, b: 0 }, // 黄
		{ r: 0, g: 255, b: 0 }, // 緑
		{ r: 0, g: 255, b: 255 }, // シアン
		{ r: 0, g: 0, b: 255 }, // 青
		{ r: 255, g: 0, b: 255 }, // マゼンタ
	],
	// 行3
	[
		{ r: 224, g: 224, b: 224 }, // ライトグレー
		{ r: 255, g: 76, b: 76 }, // 明るい赤
		{ r: 255, g: 166, b: 102 }, // 明るいオレンジ
		{ r: 255, g: 255, b: 178 }, // クリーム黄
		{ r: 128, g: 255, b: 0 }, // ライムグリーン
		{ r: 188, g: 255, b: 240 }, // ミントグリーン
		{ r: 0, g: 128, b: 255 }, // スカイブルー
		{ r: 226, g: 96, b: 144 }, // ローズピンク
	],
	// 行4
	[
		{ r: 216, g: 216, b: 216 }, // グレー
		{ r: 255, g: 127, b: 127 }, // コーラルピンク
		{ r: 255, g: 206, b: 172 }, // ピーチ
		{ r: 255, g: 222, b: 115 }, // ゴールデンイエロー
		{ r: 128, g: 248, b: 96 }, // ブライトグリーン
		{ r: 102, g: 230, b: 255 }, // アクアブルー
		{ r: 148, g: 192, b: 255 }, // ライトブルー
		{ r: 255, g: 140, b: 198 }, // ホットピンク
	],
	// 行5
	[
		{ r: 204, g: 204, b: 204 }, // グレー
		{ r: 255, g: 192, b: 192 }, // ベビーピンク
		{ r: 255, g: 104, b: 0 }, // ビビッドオレンジ
		{ r: 240, g: 200, b: 108 }, // ハニーイエロー
		{ r: 212, g: 255, b: 127 }, // イエローグリーン
		{ r: 172, g: 220, b: 230 }, // パウダーブルー
		{ r: 128, g: 128, b: 255 }, // パープルブルー
		{ r: 255, g: 184, b: 224 }, // ライトピンク
	],
	// 行6
	[
		{ r: 191, g: 191, b: 191 }, // ミディアムグレー
		{ r: 216, g: 192, b: 192 }, // ダスティローズ
		{ r: 216, g: 104, b: 108 }, // ダークコーラル
		{ r: 204, g: 204, b: 102 }, // オリーブイエロー
		{ r: 172, g: 216, b: 72 }, // アップルグリーン
		{ r: 176, g: 232, b: 232 }, // ペールシアン
		{ r: 179, g: 140, b: 255 }, // ラベンダー
		{ r: 224, g: 168, b: 188 }, // ダスティピンク
	],
	// 行7
	[
		{ r: 166, g: 166, b: 166 }, // ダークグレー
		{ r: 198, g: 162, b: 162 }, // モーヴ
		{ r: 216, g: 190, b: 172 }, // ベージュ
		{ r: 200, g: 192, b: 160 }, // カーキ
		{ r: 58, g: 232, b: 180 }, // エメラルドグリーン
		{ r: 60, g: 232, b: 232 }, // ターコイズ
		{ r: 224, g: 192, b: 248 }, // ライトラベンダー
		{ r: 224, g: 136, b: 244 }, // オーキッド
	],
];

/** パレットの行数 */
export const COLOR_PALETTE_ROWS = 7;

/** パレットの列数 */
export const COLOR_PALETTE_COLS = 8;
